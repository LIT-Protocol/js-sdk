# This file is generated by Nx.
#
# Build the docker image with `pnpm nx run explorer:docker-build`.
# Tip: Modify "docker-build" options in project.json to change docker build args.
#
# Run the container with `docker run -p 4173:80 -t explorer`.
FROM --platform=linux/amd64 docker.io/nginx:alpine

ENV NODE_ENV=production

# Remove default nginx site content
RUN rm -rf /usr/share/nginx/html/*

# Copy SPA routing config
COPY apps/explorer/nginx.conf /etc/nginx/conf.d/default.conf

# Copy the static assets produced by `nx run explorer:build`
COPY apps/explorer/dist /usr/share/nginx/html

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
